let urlLista        =   [];
let urlTemporal     =   "";
let urlsMaliciosos;   
let obj;
urls    =   document.links;
for(let i=0;    i<=urls.length; i++){
    urlTemporal =   urls[i]?.href
    urlLista.push(urlTemporal);
}


chrome.runtime.onMessage.addListener(
    function(request, sender, sendResponse) {
        if (request.greeting === "hello"){
            console.log("Petición recibida_1:");
            console.log(request);
            sendResponse({farewell: urlLista});
        }
        else if (request.greeting[0] === "hello_2"){
            console.log("Petición recibida_2: URL Maliciosos");
            // console.log(request);
            urlsMaliciosos  =   request.greeting[1];
            console.log(urlsMaliciosos);
            for(let j   =   0;  j<=urlsMaliciosos.length;   j++){
                for(let k   =   0;  k<=urls.length;   k++){
                    if(urlsMaliciosos[j]    === urls[k].href){
                        console.log("1");
                        urls[k].style.background  =   "green";
                        break;
                    }
                    else{
                        console.log("2");
                    }
                }
            }
            sendResponse({farewell: "Flujo Terminado"});
        }
    }
);


// l   =   document.links
// for(let i   =   0;  i<= l.length;   i++){
//     l[i].style.background  =   "green";
// }